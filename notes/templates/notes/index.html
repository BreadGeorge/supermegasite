{% extends 'notes/base.html' %}

{% block content %}

<!--
<div class="d-grid gap-2 d-md-flex justify-content-md-end">
        <button type="button" class="btn btn-lg btn-danger" data-bs-toggle="popover" data-bs-title="Add Note" data-bs-placement="left"  data-html="true" data-bs-content="">Add Note</button>
</div>


    <div class="col">
          <div class="card mb-3">
            <div class="row g-0">
                <div class="col-md-4">
                    <img src="https://cdn.7tv.app/emote/6258ea1dc7b4050100611b23/4x.webp" class="img-fluid rounded-start" alt="...">
                </div>
                <div class="col-md-8">
                  <div class="card-body">
                    <h5 class="card-title">Card title</h5>
                    <p class="card-text">This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.</p>
                    <p class="card-text"><small class="text-body-secondary">Last updated 3 mins ago</small></p>
                  </div>
                </div>
            </div>
          </div>
        </div>
//-->

{% if user.is_authenticated %}

<div class="container">
  <div class="row justify-content-md-left">
    <div class="col-lg-auto">
         <p>
          <button class="btn btn-primary" type="button" data-bs-toggle="collapse" data-bs-target="#collapseNoteForm" aria-expanded="false" aria-controls="collapseNoteForm">
            Add Note
          </button>
        </p>
        <div style="min-height: 0px;">
          <div class="collapse collapse-horizontal" id="collapseNoteForm">
            <div class="card card-body" style="width: 300px;">
              <form action='' enctype="multipart/form-data" method=POST>
                  {% csrf_token %}
                  {{ noteForm.as_p }}
                  <input type='submit' name='noteSubmit' value='Submit' class='btn btn-secondary'>
              </form>
            </div>
          </div>
        </div>
    </div>
    <div class="col-lg-auto">
        <p>
            <button class="btn btn-primary" type="button" data-bs-toggle="collapse" data-bs-target="#collapseScheduleForm" aria-expanded="false" aria-controls="collapseWidthExample">
                Add Schedule Block
            </button>
        </p>
        <div style="min-height: 0px;">
            <div class="collapse collapse-horizontal" id="collapseScheduleForm">
                <div class="card card-body" style="width: 300px;">
                    <form action='' method=POST>
                        {% csrf_token %}
                        {{ scheduleForm.as_p }}
                        <input type='submit' name='scheduleSubmit' value='Submit' class='btn btn-secondary'>
                    </form>
                </div>
            </div>
        </div>
    </div>
  </div>
</div>

<div class="container">
  <div class="row">
    <div class="col-12">
      <div class="row day-columns">
        <div class="day-column">
          <div class="day-header">Monday</div>
          <div class="day-content">
            {% for block in schedulemonday %}
              <a href="{% url 'delete_block' block.id %}" style="text-decoration:none">
                <div class="event" style="background-color: {{block.color}}">
                    <span class="title">{{block.name}}</span>
                    <footer>
                      <span></span>
                      <span>{{block.startTime}}{% if block.endTime %}-{{block.endTime}}{% endif %}</span>
                    </footer>
                </div>
              </a>
            {% endfor %}
          </div>
          <div class="day-footer">{{schedulemonday|length}} Task{% if schedulemonday|length != 1%}s{% endif %}</div>
        </div>
        <div class="day-column">
          <div class="day-header">Tuesday</div>
          <div class="day-content">
            {% for block in scheduletuesday %}
              <a href="{% url 'delete_block' block.id %}" style="text-decoration:none">
                <div class="event" style="background-color: {{block.color}}">
                    <span class="title">{{block.name}}</span>
                    <footer>
                      <span></span>
                      <span>{{block.startTime}}{% if block.endTime %}-{{block.endTime}}{% endif %}</span>
                    </footer>
                </div>
              </a>
            {% endfor %}
          </div>
          <div class="day-footer">{{scheduletuesday|length}} Task{% if scheduletuesday|length != 1%}s{% endif %}</div>
        </div>
        <div class="day-column">
          <div class="day-header">Wednesday</div>
          <div class="day-content">
            {% for block in schedulewednesday %}
              <a href="{% url 'delete_block' block.id %}" style="text-decoration:none">
                <div class="event" style="background-color: {{block.color}}">
                    <span class="title">{{block.name}}</span>
                    <footer>
                      <span></span>
                      <span>{{block.startTime}}{% if block.endTime %}-{{block.endTime}}{% endif %}</span>
                    </footer>
                </div>
              </a>
            {% endfor %}
          </div>
          <div class="day-footer">{{schedulewednesday|length}} Task{% if schedulewednesday|length != 1%}s{% endif %}</div>
        </div>
        <div class="day-column">
          <div class="day-header">Thursday</div>
          <div class="day-content">
            {% for block in schedulethursday %}
              <a href="{% url 'delete_block' block.id %}" style="text-decoration:none">
                <div class="event" style="background-color: {{block.color}}">
                    <span class="title">{{block.name}}</span>
                    <footer>
                      <span></span>
                      <span>{{block.startTime}}{% if block.endTime %}-{{block.endTime}}{% endif %}</span>
                    </footer>
                </div>
              </a>
            {% endfor %}
          </div>
          <div class="day-footer">{{schedulethursday|length}} Task{% if schedulethursday|length != 1%}s{% endif %}</div>
        </div>
        <div class="day-column">
          <div class="day-header">Friday</div>
          <div class="day-content">
            {% for block in schedulefriday %}
              <a href="{% url 'delete_block' block.id %}" style="text-decoration:none">
                <div class="event" style="background-color: {{block.color}}">
                    <span class="title">{{block.name}}</span>
                    <footer>
                      <span></span>
                      <span>{{block.startTime}}{% if block.endTime %}-{{block.endTime}}{% endif %}</span>
                    </footer>
                </div>
              </a>
            {% endfor %}
          </div>
          <div class="day-footer">{{schedulefriday|length}} Task{% if schedulefriday|length != 1%}s{% endif %}</div>
        </div>
        <div class="day-column">
          <div class="day-header">Saturday</div>
          <div class="day-content">
            {% for block in schedulesaturday %}
              <a href="{% url 'delete_block' block.id %}" style="text-decoration:none">
                <div class="event" style="background-color: {{block.color}}">
                    <span class="title">{{block.name}}</span>
                    <footer>
                      <span></span>
                      <span>{{block.startTime}}{% if block.endTime %}-{{block.endTime}}{% endif %}</span>
                    </footer>
                </div>
              </a>
            {% endfor %}
          </div>
          <div class="day-footer">{{schedulesaturday|length}} Task{% if schedulesaturday|length != 1%}s{% endif %}</div>
        </div>
        <div class="day-column">
          <div class="day-header">Sunday</div>
          <div class="day-content">
            {% for block in schedulesunday %}
              <a href="{% url 'delete_block' block.id %}" style="text-decoration:none">
                <div class="event" style="background-color: {{block.color}}">
                    <span class="title">{{block.name}}</span>
                    <footer>
                      <span></span>
                      <span>{{block.startTime}}{% if block.endTime %}-{{block.endTime}}{% endif %}</span>
                    </footer>
                </div>
              </a>
            {% endfor %}
          </div>
          <div class="day-footer">{{schedulesunday|length}} Task{% if schedulesunday|length != 1%}s{% endif %}</div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="container text-center">
  <div class="row row-cols-4  g-3 g-lg-3">
    {% for note in usernotes %}
        <div class="col">
      <div class="card mb-3" style="background-color: {{note.color}};">
        <div class="row g-0">
            <a data-bs-toggle="modal" data-bs-target="#DeleteNoteConfirm-{{ note.id }}" href="#DeleteNoteConfirm-{{ note.id }}">
                <button type="button" class="btn-close position-absolute top-0 end-0" aria-label="Close"></button>
            </a>
            <!--Modal start//-->
                <div class="modal" id="DeleteNoteConfirm-{{ note.id }}" tabindex="-1" role="dialog" aria-labelledby="DeleteNoteTitle" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="DeleteNoteTitle">Are you sure you want to delete this note?</h5>
                            </div>
                            <div class="modal-body">
                                There is no going back
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Wait, no</button>
                                <a href="{% url 'delete_note' note.id %}">
                                    <button type="button" class="btn btn-primary">Yes</button>
                                 </a>
                            </div>
                        </div>
                    </div>
                </div>
            <!--Modal end//-->
            {% if note.image %}
                <div class="col-md-4">
                    <img src="{{note.image.url}}" class="img-fluid rounded-start" style="width: 100%; height: 100%;" alt="...">
                </div>
            <div class="col-md-8">
            {% else %}
            <div class="col">
            {% endif %}
              <div class="card-body ">
                <h5 class="card-title">{{note.name}}</h5>
                <p class="card-text">{{note.desc}}</p>
                <p class="card-text"><small class="text-body-secondary">{% if note.until %}{{note.until}}{% endif %}</small></p>
              </div>
            </div>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
</div>



{% else %}
    <div class="alert alert-info" role="alert">
        <h4 class="alert-heading">Please log in to add/edit notes.</h4>
    </div>
{% endif %}





{% endblock %}